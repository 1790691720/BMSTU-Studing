function show_filearray_page(a){var b=$("#search_text").val();ShowLoading("");$.post("/engine/modules/filearray/ajax/user_ajax.php",{text:b,page:a,action:"show_filearray_page"},function(c){HideLoading("");$("#search_result").html(c);$("#page_id").val(a)})}function show_high_schools_page(a){var b=$("#search_text").val();ShowLoading("");$.post("/engine/modules/filearray/ajax/user_ajax.php",{text:b,page:a,action:"show_high_schools_page"},function(c){HideLoading("");$("#search_result").html(c);$("#page_id").val(a)})}function show_news_of_hs_page(a,c,b){ShowLoading("");$.post("/engine/modules/filearray/ajax/user_ajax.php",{cat_id:c,page:a,text:b,action:"show_news_of_hs_page"},function(d){HideLoading("");$("#news_of_hs_block").html(d)})}function show_events_of_hs_page(b,e,d,c,a){ShowLoading("");$.post("/engine/modules/filearray/ajax/user_ajax.php",{id:e,page:b,text:d,date_start:c,date_finish:a,action:"show_events_of_hs_page"},function(f){HideLoading("");$("#events_of_hs_block").html(f)})}function fast_search_df(f,b){var e=parseInt();f=f.trim();var a=parseInt(f.length);if(last_word!=f){if(a>=b||a==0){var c=$("#edit_type").val();var d="show_filearray_page";if(c=="dossier"){d="show_dossier_page"}if(c=="high_school"){d="show_high_schools_page"}ShowLoading("");$.post("/engine/modules/filearray/ajax/user_ajax.php",{text:f,page:"1",action:d,type:c},function(g){HideLoading("");$("#search_result").html(g);select_text_in_table("search_result",f);last_word=f})}}}function file_vote(b,a){ShowLoading("");$.post("/engine/modules/filearray/ajax/user_ajax.php",{id:b,type:a,action:"file_vote"},function(d){HideLoading("");if(d=="ok"){var c=parseInt($("#rate").html());if(a=="up"){c=c+1}else{c=c-1}if(c>0){$("#rate").css("color","green")}else{if(c<0){$("#rate").css("color","red")}else{$("#rate").css("color","black")}}$("#rate").html(c);$("#vote_num").html(parseInt($("#vote_num").html())+1);DLEalert("Спасибо, ваш голос учтен.","Выставление рейтинга файлу")}else{if(d=="you_file"){DLEalert("Вы не можете голосовать за файл загруженый вами","Выставление рейтинга файлу")}else{if(d=="vote_exists"){DLEalert("Вы уже голосовали за данный файл","Выставление рейтинга файлу")}else{if(d=="no_download"){DLEalert("Выставление рейтинга файлу возможно только после его скачивания","Выставление рейтинга файлу")}else{if(d=="auth"){DLEalert("Для того чтобы проголосовать авторизуйтесь","Выставление рейтинга файлу")}else{DLEalert(d,"Выставление рейтинга файлу")}}}}}})}function show_dossier_page(a){var b=$("#search_text").val();ShowLoading("");$.post("/engine/modules/filearray/ajax/user_ajax.php",{text:b,page:a,action:"show_dossier_page"},function(c){HideLoading("");$("#search_result").html(c);$("#page_id").val(a)})}function send_vote_explanations(b){var a=0;if(dle_skin!="smartphone"){a=$("#slider_quality_explanations").slider("value")}else{a=$("#slider_quality_explanations").val()}if(parseInt(a)>0){ShowLoading("");$.post("/engine/modules/filearray/ajax/user_ajax.php",{id:b,val:a,action:"send_vote_explanations"},function(c){HideLoading("");if(c=="auth"){DLEalert("Чтобы проголосовать авторизуйтесь","Голосование")}else{location="/dossier/dossier-"+b+".html"}})}else{DLEalert("Вы не можеет поставить оценку меньше 1","Голосование")}}function send_vote_valuation(b){var a=0;if(dle_skin!="smartphone"){a=$("#slider_valuation").slider("value")}else{a=$("#slider_valuation").val()}if(parseInt(a)!=0){ShowLoading("");$.post("/engine/modules/filearray/ajax/user_ajax.php",{id:b,val:a,action:"send_vote_valuation"},function(c){HideLoading("");if(c=="auth"){DLEalert("Чтобы проголосовать авторизуйтесь","Голосование")}else{location="/dossier/dossier-"+b+".html"}})}else{DLEalert("Вы не можеет поставить оценку меньше 1","Голосование")}}function send_vote_rate(b){var a=0;if(dle_skin!="smartphone"){a=$("#slider_rate").slider("value")}else{a=$("#slider_rate").val()}if(parseInt(a)!=0){ShowLoading("");$.post("/engine/modules/filearray/ajax/user_ajax.php",{id:b,val:a,action:"send_vote_rate"},function(c){HideLoading("");if(c=="auth"){DLEalert("Чтобы проголосовать авторизуйтесь","Голосование")}else{location="/dossier/dossier-"+b+".html"}})}else{DLEalert("Вы не можеет поставить оценку меньше 1","Голосование")}}function show_p_task_page(b,a){$("#page"+a).val(b);$("#tab_active").val(a);$("#form_my_p_task").submit()}function p_task_navigate(a){$("#page").val(a);$("#submit_bt").click()}function show_p_task_cat(a){ShowLoading();document.cookie="p_task_cat_cookie="+a;location="/task-archive/"}function post_rate_vote(b,a){ShowLoading("");$.post("/engine/modules/filearray/ajax/user_ajax.php",{id:b,type:a,action:"post_rate_vote"},function(d){HideLoading("");if(d=="ok"){$("#b_rate_"+b+" .masha_index").remove();var c=parseInt($("#b_rate_"+b).html());if(a=="up"){c=c+1}else{c=c-1}if(c>0){$("#b_rate_"+b).css("color","green")}else{if(c<0){$("#b_rate_"+b).css("color","red")}else{$("#b_rate_"+b).css("color","black")}}if(c>0){$("#b_rate_"+b).html("+"+c)}else{$("#b_rate_"+b).html(c)}DLEalert("Спасибо, ваш голос учтен.","Выставление рейтинга статье")}else{if(d=="vote_exists"){DLEalert("Вы уже голосовали за данную статью","Выставление рейтинга статье")}else{if(d=="is_my_comm"){DLEalert("Вы не можете выставлять рейтинг своим же статьям","Выставление рейтинга статье")}else{if(d=="auth"){DLEalert("Для того чтобы проголосовать авторизуйтесь","Выставление рейтинга статье")}else{DLEalert(d,"Выставление рейтинга статье")}}}}})}function album_rate_vote(b,a){ShowLoading("");$.post("/engine/modules/filearray/ajax/user_ajax.php",{id:b,type:a,action:"album_rate_vote"},function(d){HideLoading("");if(d=="ok"){$("#b_rate_"+b+" .masha_index").remove();var c=parseInt($("#b_rate_"+b).html());if(a=="up"){c=c+1}else{c=c-1}if(c>0){$("#b_rate_"+b).css("color","green")}else{if(c<0){$("#b_rate_"+b).css("color","red")}else{$("#b_rate_"+b).css("color","black")}}if(c>0){$("#b_rate_"+b).html("+"+c)}else{$("#b_rate_"+b).html(c)}DLEalert("Спасибо, ваш голос учтен.","Выставление рейтинга альбому")}else{if(d=="vote_exists"){DLEalert("Вы уже голосовали за данную статью","Выставление рейтинга альбому")}else{if(d=="is_my_comm"){DLEalert("Вы не можете выставлять рейтинг своим же статьям","Выставление рейтинга альбому")}else{if(d=="auth"){DLEalert("Для того чтобы проголосовать авторизуйтесь","Выставление рейтинга альбому")}else{DLEalert(d,"Выставление рейтинга альбому")}}}}})}function select_text_in_table(b,a){$("#"+b+" tr").each(function(c,d){$(d).find("td:first a").each(function(g,f){$(f).html($(f).text());var e=$(f).html();e=e.replace(new RegExp("("+a+")","gmi"),'<span style="background-color:#FFFF00;">$1</span>');$(f).html(e)})});$("#"+b+" tr").each(function(f,e){var d=$(e).find("td:eq(1)");d.html(d.text());var c=d.html();c=c.replace(new RegExp("("+a+")","gmi"),'<span style="background-color:#FFFF00;">$1</span>');d.html(c)})}function search_in_table(b,c){$("#"+c+" > tr, #"+c+" > tbody > tr").show();var a=b.trim().toLowerCase();if(parseInt(a.length)>1){$("#"+c+" > tr, #"+c+" > tbody > tr").each(function(e,d){var f=-1;if(parseInt(a.length)>1){f=parseInt($(d).find("td:first").text().toLowerCase().indexOf(a))}if((parseInt(a.length)>1&&f!=-1)||(parseInt(a.length)<2)){}else{$(d).hide()}});select_text_in_table(c,b)}}function fast_search_dossier(b,c,a){if(b.trim().length>1){ShowLoading("");$.post("/engine/modules/filearray/ajax/user_ajax.php",{text:b,cat_id:a,action:"fast_search_dossier"},function(d){HideLoading("");$("#"+c+" .one-dossier-row, #"+c+" tbody, #nav-block").remove();$("#"+c+" > thead").after("<tbody>"+d+"</tbody>");select_text_in_table(c,b)})}}function sort_table(g,b,d,c){var e=$("#"+g+" tbody tr");var a=$("#"+g);d=parseInt(d);var f=$("#"+b).attr("sort");if(f=="asc"){$("#"+b).attr("sort","desc")}else{$("#"+b).attr("sort","asc")}e.sort(function(i,h){var j=$(i).find("td").eq(d).text(),k=$(h).find("td").eq(d).text();if(c=="int"){if(parseInt(j)>parseInt(k)){if(f=="asc"){return 1}else{return -1}}else{if(parseInt(j)<parseInt(k)){if(f=="asc"){return -1}else{return 1}}else{return 0}}}else{if(c=="str"){if(j&&k){if(f=="asc"){return j.toUpperCase().localeCompare(k.toUpperCase())}else{return parseInt(j.toUpperCase().localeCompare(k.toUpperCase()))*(-1)}}return 0}}});e.detach().appendTo(a)};